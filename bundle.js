(()=>{"use strict";const e={enStandart:{Backquote:"`",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Backspace:"Backspace",Tab:"Tab",KeyQ:"q",KeyW:"w",KeyE:"e",KeyR:"r",KeyT:"t",KeyY:"y",KeyU:"u",KeyI:"i",KeyO:"o",KeyP:"p",BracketLeft:"[",BracketRight:"]",Backslash:"\\",Delete:"Del",CapsLock:"CapsLock",KeyA:"a",KeyS:"s",KeyD:"d",KeyF:"f",KeyG:"g",KeyH:"h",KeyJ:"j",KeyK:"k",KeyL:"l",Semicolon:";",Quote:"'",Enter:"Enter",ShiftLeft:"Shift",KeyZ:"z",KeyX:"x",KeyC:"c",KeyV:"v",KeyB:"b",KeyN:"n",KeyM:"m",Comma:",",Period:".",Slash:"/",ArrowUp:"&#8657;",ShiftRight:"Shift ",ControlLeft:"Ctrl",MetaLeft:"Win",AltLeft:"Alt",Space:"Space",AltRight:"Alt ",ArrowLeft:"&#8656;",ArrowDown:"&#8659;",ArrowRight:"&#8658;",ControlRight:"Ctrl "},enShift:{Backquote:"~",Digit1:"!",Digit2:"@",Digit3:"#",Digit4:"$",Digit5:"%",Digit6:"^",Digit7:"&",Digit8:"*",Digit9:"(",Digit0:")",Minus:"_",Equal:"+",Backspace:"Backspace",Tab:"Tab",KeyQ:"Q",KeyW:"W",KeyE:"E",KeyR:"R",KeyT:"T",KeyY:"Y",KeyU:"U",KeyI:"I",KeyO:"O",KeyP:"P",BracketLeft:"{",BracketRight:"}",Backslash:"|",Delete:"Del",CapsLock:"CapsLock",KeyA:"A",KeyS:"S",KeyD:"D",KeyF:"F",KeyG:"G",KeyH:"H",KeyJ:"J",KeyK:"K",KeyL:"L",Semicolon:":",Quote:'"',Enter:"Enter",ShiftLeft:"Shift",KeyZ:"Z",KeyX:"X",KeyC:"C",KeyV:"V",KeyB:"B",KeyN:"N",KeyM:"M",Comma:"<",Period:">",Slash:"?",ArrowUp:"&#8657;",ShiftRight:"Shift",ControlLeft:"Ctrl",MetaLeft:"Win",AltLeft:"Alt",Space:"Space",AltRight:"Alt",ArrowLeft:"&#8656;",ArrowDown:"&#8659;",ArrowRight:"&#8658;",ControlRight:"Ctrl"},enCapsLock:{Backquote:"`",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Backspace:"Backspace",Tab:"Tab",KeyQ:"Q",KeyW:"W",KeyE:"E",KeyR:"R",KeyT:"T",KeyY:"Y",KeyU:"U",KeyI:"I",KeyO:"O",KeyP:"P",BracketLeft:"[",BracketRight:"]",Backslash:"\\",Delete:"Del",CapsLock:"CapsLock",KeyA:"A",KeyS:"S",KeyD:"D",KeyF:"F",KeyG:"G",KeyH:"H",KeyJ:"J",KeyK:"K",KeyL:"L",Semicolon:";",Quote:"'",Enter:"Enter",ShiftLeft:"Shift",KeyZ:"Z",KeyX:"X",KeyC:"C",KeyV:"V",KeyB:"B",KeyN:"N",KeyM:"M",Comma:",",Period:".",Slash:"/",ArrowUp:"&#8657;",ShiftRight:"Shift",ControlLeft:"Ctrl",MetaLeft:"Win",AltLeft:"Alt",Space:"Space",AltRight:"Alt",ArrowLeft:"&#8656;",ArrowDown:"&#8659;",ArrowRight:"&#8658;",ControlRight:"Ctrl"},enShiftCapsLock:{Backquote:"~",Digit1:"!",Digit2:"@",Digit3:"#",Digit4:"$",Digit5:"%",Digit6:"^",Digit7:"&",Digit8:"*",Digit9:"(",Digit0:")",Minus:"_",Equal:"+",Backspace:"Backspace",Tab:"Tab",KeyQ:"q",KeyW:"w",KeyE:"e",KeyR:"r",KeyT:"t",KeyY:"y",KeyU:"u",KeyI:"i",KeyO:"o",KeyP:"p",BracketLeft:"{",BracketRight:"}",Backslash:"|",Delete:"Del",CapsLock:"CapsLock",KeyA:"a",KeyS:"s",KeyD:"d",KeyF:"f",KeyG:"g",KeyH:"h",KeyJ:"j",KeyK:"k",KeyL:"l",Semicolon:":",Quote:'"',Enter:"Enter",ShiftLeft:"Shift",KeyZ:"z",KeyX:"x",KeyC:"c",KeyV:"v",KeyB:"b",KeyN:"n",KeyM:"m",Comma:"<",Period:">",Slash:"?",ArrowUp:"&#8657;",ShiftRight:"Shift",ControlLeft:"Ctrl",MetaLeft:"Win",AltLeft:"Alt",Space:"Space",AltRight:"Alt",ArrowLeft:"&#8656;",ArrowDown:"&#8659;",ArrowRight:"&#8658;",ControlRight:"Ctrl"},ruStandart:{Backquote:"ё",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Backspace:"Backspace",Tab:"Tab",KeyQ:"й",KeyW:"ц",KeyE:"у",KeyR:"к",KeyT:"е",KeyY:"н",KeyU:"г",KeyI:"ш",KeyO:"щ",KeyP:"з",BracketLeft:"х",BracketRight:"ъ",Backslash:"\\",Delete:"Del",CapsLock:"CapsLock",KeyA:"ф",KeyS:"ы",KeyD:"в",KeyF:"а",KeyG:"п",KeyH:"р",KeyJ:"о",KeyK:"л",KeyL:"д",Semicolon:"ж",Quote:"э",Enter:"Enter",ShiftLeft:"Shift",KeyZ:"я",KeyX:"ч",KeyC:"с",KeyV:"м",KeyB:"и",KeyN:"т",KeyM:"ь",Comma:"б",Period:"ю",Slash:".",ArrowUp:"&#8657;",ShiftRight:"Shift",ControlLeft:"Ctrl",MetaLeft:"Win",AltLeft:"Alt",Space:"Space",AltRight:"Alt",ArrowLeft:"&#8656;",ArrowDown:"&#8659;",ArrowRight:"&#8658;",ControlRight:"Ctrl"},ruShift:{Backquote:"Ё",Digit1:"!",Digit2:'"',Digit3:"№",Digit4:";",Digit5:"%",Digit6:":",Digit7:"?",Digit8:"*",Digit9:"(",Digit0:")",Minus:"_",Equal:"+",Backspace:"Backspace",Tab:"Tab",KeyQ:"Й",KeyW:"Ц",KeyE:"У",KeyR:"К",KeyT:"Е",KeyY:"Н",KeyU:"Г",KeyI:"Ш",KeyO:"Щ",KeyP:"З",BracketLeft:"Х",BracketRight:"Ъ",Backslash:"/",Delete:"Del",CapsLock:"CapsLock",KeyA:"Ф",KeyS:"Ы",KeyD:"В",KeyF:"А",KeyG:"П",KeyH:"Р",KeyJ:"О",KeyK:"Л",KeyL:"Д",Semicolon:"Ж",Quote:"Э",Enter:"Enter",ShiftLeft:"Shift",KeyZ:"Я",KeyX:"Ч",KeyC:"С",KeyV:"М",KeyB:"И",KeyN:"Т",KeyM:"Ь",Comma:"Б",Period:"Ю",Slash:",",ArrowUp:"&#8657;",ShiftRight:"Shift",ControlLeft:"Ctrl",MetaLeft:"Win",AltLeft:"Alt",Space:"Space",AltRight:"Alt ",ArrowLeft:"&#8656;",ArrowDown:"&#8659;",ArrowRight:"&#8658;",ControlRight:"Ctrl "},ruCapsLock:{Backquote:"Ё",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Backspace:"Backspace",Tab:"Tab",KeyQ:"Й",KeyW:"Ц",KeyE:"У",KeyR:"К",KeyT:"Е",KeyY:"Н",KeyU:"Г",KeyI:"Ш",KeyO:"Щ",KeyP:"З",BracketLeft:"Х",BracketRight:"Ъ",Backslash:"\\",Delete:"Del",CapsLock:"CapsLock",KeyA:"Ф",KeyS:"Ы",KeyD:"В",KeyF:"А",KeyG:"П",KeyH:"Р",KeyJ:"О",KeyK:"Л",KeyL:"Д",Semicolon:"Ж",Quote:"Э",Enter:"Enter",ShiftLeft:"Shift",KeyZ:"Я",KeyX:"Ч",KeyC:"С",KeyV:"М",KeyB:"И",KeyN:"Т",KeyM:"Ь",Comma:"Б",Period:"Ю",Slash:".",ArrowUp:"&#8657;",ShiftRight:"Shift",ControlLeft:"Ctrl",MetaLeft:"Win",AltLeft:"Alt",Space:"Space",AltRight:"Alt",ArrowLeft:"&#8656;",ArrowDown:"&#8659;",ArrowRight:"&#8658;",ControlRight:"Ctrl"},ruShiftCapsLock:{Backquote:"Ё",Digit1:"!",Digit2:'"',Digit3:"№",Digit4:";",Digit5:"%",Digit6:":",Digit7:"?",Digit8:"*",Digit9:"(",Digit0:")",Minus:"_",Equal:"+",Backspace:"Backspace",Tab:"Tab",KeyQ:"й",KeyW:"ц",KeyE:"у",KeyR:"к",KeyT:"е",KeyY:"н",KeyU:"г",KeyI:"ш",KeyO:"щ",KeyP:"з",BracketLeft:"х",BracketRight:"ъ",Backslash:"/",Delete:"Del",CapsLock:"CapsLock",KeyA:"ф",KeyS:"ы",KeyD:"в",KeyF:"а",KeyG:"п",KeyH:"р",KeyJ:"о",KeyK:"л",KeyL:"д",Semicolon:"ж",Quote:"э",Enter:"Enter",ShiftLeft:"Shift",KeyZ:"я",KeyX:"ч",KeyC:"с",KeyV:"м",KeyB:"и",KeyN:"т",KeyM:"ь",Comma:"б",Period:"ю",Slash:",",ArrowUp:"&#8657;",ShiftRight:"Shift",ControlLeft:"Ctrl",MetaLeft:"Win",AltLeft:"Alt",Space:"Space",AltRight:"Alt",ArrowLeft:"&#8656;",ArrowDown:"&#8659;",ArrowRight:"&#8658;",ControlRight:"Ctrl"}},t=[["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowDown","ArrowRight","ControlRight"]];class i{constructor(e,t,i,a,o){this.state=e,this.stateId=t,this.id=i,this.tagAppend=a,this.data=o}createKeyboardButton(){const e=document.createElement("span");e.classList.add(`${this.stateId}`),this.state!==`${this.stateId}`&&e.classList.add("hide"),e.innerHTML=this.data[this.stateId][this.id],this.tagAppend.append(e)}}let a="en";!function(a){document.body.innerHTML="";const o=document.createElement("div");o.classList.add("wrapper"),document.body.prepend(o);const c=document.createElement("div");c.classList.add("header"),o.append(c);const s=document.createElement("div");s.classList.add("h1"),s.textContent="RSS Virtual Keyboard",c.append(s);const r=document.createElement("div");r.classList.add("main"),o.append(r);const n=document.createElement("textarea");n.classList.add("textarea"),n.rows="7",n.cols="42",n.placeholder="Hello, friend!",n.autofocus="on",r.append(n);const l=document.createElement("div");l.classList.add("keyboard"),r.append(l);const y=document.createElement("div");y.classList.add("about"),r.append(y);const K=document.createElement("p");K.classList.add("about-text"),K.textContent="created in OS Windows",y.append(K);const g=document.createElement("p");g.classList.add("about-text"),g.textContent="language switch: CtrlLeft + ShiftLeft",y.append(g),function(a){const o=(()=>{const e=document.querySelector(".keyboard");return e.innerHTML="",e})();t.forEach((t=>{const c=document.createElement("div");c.classList.add("row"),o.append(c),t.forEach((t=>{const o=document.createElement("div");o.classList.add("key"),o.classList.add(`${t}`),c.append(o),Object.keys(e).forEach((c=>{new i(a,c,t,o,e).createKeyboardButton()}))}))}))}(a)}("enStandart");const o=document.querySelector(".CapsLock"),c=document.querySelector(".ShiftLeft"),s=document.querySelector(".ShiftRight"),r=document.querySelector(".ControlLeft"),n=[...document.querySelectorAll(".enStandart")],l=[...document.querySelectorAll(".enShift")],y=[...document.querySelectorAll(".enCapsLock")],K=[...document.querySelectorAll(".enShiftCapsLock")],g=[...document.querySelectorAll(".ruStandart")],h=[...document.querySelectorAll(".ruShift")],d=[...document.querySelectorAll(".ruCapsLock")],L=[...document.querySelectorAll(".ruShiftCapsLock")],f=document.querySelector(".textarea"),S=[...document.querySelectorAll(".key")],u=["Backspace","Tab","Del","CapsLock","Enter","Shift","Ctrl","Alt","Win","Space"];function D(e,t,i,a,r){!c.contains(e.target)&&!s.contains(e.target)||o.classList.contains("active")||(t.forEach((e=>e.classList.toggle("hide"))),i.forEach((e=>e.classList.toggle("hide")))),o.contains(e.currentTarget)&&(c.classList.contains("active")||s.classList.contains("active"))&&(i.forEach((e=>e.classList.toggle("hide"))),r.forEach((e=>e.classList.toggle("hide")))),(c.contains(e.target)||s.contains(e.target))&&o.classList.contains("active")&&(a.forEach((e=>e.classList.toggle("hide"))),r.forEach((e=>e.classList.toggle("hide")))),!o.contains(e.target)||c.classList.contains("active")||s.classList.contains("active")||(t.forEach((e=>e.classList.toggle("hide"))),a.forEach((e=>e.classList.toggle("hide"))))}const p=e=>{"en"===a&&D(e,n,l,y,K),"ru"===a&&D(e,g,h,d,L)};function k(e){f.focus();let t="";const i=e.currentTarget.classList[1];var a;t=-1===u.indexOf(e.srcElement.outerText)?e.srcElement.outerText:"Tab"===(a=e.srcElement.outerText)?"\t":"Space"===a?" ":"Enter"===a?"\n":"Del"===a&&f.selectionStart===f.selectionEnd?(f.selectionEnd+=1,""):"Backspace"===a&&f.selectionStart===f.selectionEnd&&0!==f.selectionStart?(f.selectionStart-=1,""):"",p(e),f.setRangeText(t,f.selectionStart,f.selectionEnd,"end"),f.focus(),"CapsLock"===i?o.classList.toggle("active"):S.forEach((e=>{e.classList.contains(i)&&e.classList.add("active")}))}function C(e){const t=e.currentTarget.classList[1];"CapsLock"!==e.currentTarget.classList[1]&&(p(e),S.forEach((e=>{e.classList.contains(t)&&e.classList.remove("active")})))}S.forEach((e=>e.addEventListener("mousedown",k))),S.forEach((e=>e.addEventListener("mouseup",C)));const m=[n,y,l,K],A=[g,d,h,L],E=e=>{"ru"===e?(m.forEach((e=>{e.forEach((e=>e.classList.add("hide")))})),o.classList.contains("active")?d.forEach((e=>e.classList.remove("hide"))):g.forEach((e=>e.classList.remove("hide")))):(A.forEach((e=>{e.forEach((e=>e.classList.add("hide")))})),o.classList.contains("active")?y.forEach((e=>e.classList.remove("hide"))):n.forEach((e=>e.classList.remove("hide")))),c.classList.remove("active")};window.addEventListener("keydown",(function(e){e.preventDefault();const t=e.code;"CapsLock"===t&&e.repeat||"ShiftLeft"===t&&e.repeat||"ShiftRight"===t&&e.repeat||"ControlLeft"===t&&e.repeat||S.forEach((e=>{if(e.classList.contains(t)){const t=new MouseEvent("mousedown");e.dispatchEvent(t)}}))})),window.addEventListener("keyup",(function(e){e.preventDefault();const t=e.code;if("ShiftLeft"===t&&r.classList.contains("active"))return a="en"===a?"ru":"en",void E(a);S.forEach((e=>{if(e.classList.contains(t)){const t=new MouseEvent("mouseup");e.dispatchEvent(t)}}))})),window.addEventListener("beforeunload",(function(){let e="";o.classList.contains("active")&&(e="active"),localStorage.clear(),localStorage.setItem("lang",JSON.stringify(a)),localStorage.setItem("stateTextarea",JSON.stringify(f.value)),localStorage.setItem("stateCaps",JSON.stringify(e))})),window.addEventListener("load",(function(){localStorage.getItem("stateCaps")&&"active"===JSON.parse(localStorage.getItem("stateCaps"))&&o.classList.add("active"),localStorage.getItem("lang")&&(a=JSON.parse(localStorage.getItem("lang")),E(a)),localStorage.getItem("stateTextarea")&&(f.value=JSON.parse(localStorage.getItem("stateTextarea")))}))})();